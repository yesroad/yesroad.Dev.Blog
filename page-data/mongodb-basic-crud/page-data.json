{"componentChunkName":"component---src-templates-post-tsx","path":"/mongodb-basic-crud/","result":{"data":{"markdownRemark":{"html":"<p>MongoDB 문서를 참고해,\nCheatSheet 개념으로 정리해본 기초 Mongo Shell CRUD 명령어.</p>\n<p>이 포스트에서는 기초적인 것만 다루며 <code class=\"language-text\">writeConcern</code> Option, Evaluation Query 등은 다루지 않습니다.</p>\n<h2 id=\"database\" style=\"position:relative;\"><a href=\"#database\" aria-label=\"database permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Database</h2>\n<h3 id=\"database-목록\" style=\"position:relative;\"><a href=\"#database-%EB%AA%A9%EB%A1%9D\" aria-label=\"database 목록 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Database 목록</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token operator\">></span> show databases</code></pre></div>\n<h3 id=\"database-선택\" style=\"position:relative;\"><a href=\"#database-%EC%84%A0%ED%83%9D\" aria-label=\"database 선택 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Database 선택</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token operator\">></span> use db_name</code></pre></div>\n<blockquote>\n<p>존재하지 않는 DB 선택 시, 이후 DB 삽입등이 이루어지면 자동으로 생성된다.</p>\n</blockquote>\n<h3 id=\"database-제거\" style=\"position:relative;\"><a href=\"#database-%EC%A0%9C%EA%B1%B0\" aria-label=\"database 제거 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Database 제거</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token operator\">></span> db.dropDatabase<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<blockquote>\n<p>현재 선택되어있는 Database를 제거한다.</p>\n</blockquote>\n<h2 id=\"collection\" style=\"position:relative;\"><a href=\"#collection\" aria-label=\"collection permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Collection</h2>\n<h3 id=\"collection-생성\" style=\"position:relative;\"><a href=\"#collection-%EC%83%9D%EC%84%B1\" aria-label=\"collection 생성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Collection 생성</h3>\n<p><a href=\"https://docs.mongodb.com/manual/reference/method/db.createCollection/index.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><code class=\"language-text\">db.createCollection(name, [options])</code></a></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token operator\">></span> db.createCollection<span class=\"token punctuation\">(</span>collection_name<span class=\"token punctuation\">)</span></code></pre></div>\n<blockquote>\n<p>일반적으로 insert시 지정한 collection이 없는 콜렉션이면 자동으로 생성되므로 따로 Collection을 생성할 필요는 없지만 options를 활용하기 위해서는 createCollection을 사용한다.</p>\n</blockquote>\n<h3 id=\"collection-제거\" style=\"position:relative;\"><a href=\"#collection-%EC%A0%9C%EA%B1%B0\" aria-label=\"collection 제거 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Collection 제거</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token operator\">></span> db.collection_name.drop<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3 id=\"collection-이름-변경\" style=\"position:relative;\"><a href=\"#collection-%EC%9D%B4%EB%A6%84-%EB%B3%80%EA%B2%BD\" aria-label=\"collection 이름 변경 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Collection 이름 변경</h3>\n<p><a href=\"https://docs.mongodb.com/manual/reference/method/db.collection.renameCollection/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><code class=\"language-text\">db.collection.renameCollection(target, [dropTarget])</code></a></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">db.rrecord.renameCollection<span class=\"token punctuation\">(</span><span class=\"token string\">\"record\"</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h2 id=\"insert\" style=\"position:relative;\"><a href=\"#insert\" aria-label=\"insert permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Insert</h2>\n<h3 id=\"하나의-document-삽입\" style=\"position:relative;\"><a href=\"#%ED%95%98%EB%82%98%EC%9D%98-document-%EC%82%BD%EC%9E%85\" aria-label=\"하나의 document 삽입 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>하나의 Document 삽입</h3>\n<p><a href=\"https://docs.mongodb.com/manual/reference/method/db.collection.insertOne/#db.collection.insertOne\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><code class=\"language-text\">db.collection.insertOne(document, [options])</code></a></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token operator\">></span> db.collection_name.insertOne<span class=\"token punctuation\">(</span>\n  <span class=\"token punctuation\">{</span> name: <span class=\"token string\">\"Jhon\"</span>, age: <span class=\"token number\">24</span> <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<h3 id=\"여러-document-삽입\" style=\"position:relative;\"><a href=\"#%EC%97%AC%EB%9F%AC-document-%EC%82%BD%EC%9E%85\" aria-label=\"여러 document 삽입 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>여러 Document 삽입</h3>\n<p><a href=\"https://docs.mongodb.com/manual/reference/method/db.collection.insertMany/#db.collection.insertMany\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><code class=\"language-text\">db.collection.insertMany(Array of documents, [options])</code></a></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token operator\">></span> db.collection_name.insertMany<span class=\"token punctuation\">(</span>\n  <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span> name: <span class=\"token string\">\"Jhon\"</span>, age: <span class=\"token number\">24</span> <span class=\"token punctuation\">}</span>,\n    <span class=\"token punctuation\">{</span> name: <span class=\"token string\">\"Darcy\"</span>, age: <span class=\"token number\">26</span> <span class=\"token punctuation\">}</span>,\n    <span class=\"token punctuation\">{</span> name: <span class=\"token string\">\"Ted\"</span>, age: <span class=\"token number\">22</span> <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p><strong>ordered</strong>: (boolean/default:true) Document를 기술한 순서대로 삽입</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token operator\">></span> db.collection_name.insertMany<span class=\"token punctuation\">(</span>\n  <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span> name: <span class=\"token string\">\"Jhon\"</span>, age: <span class=\"token number\">24</span> <span class=\"token punctuation\">}</span>,\n    <span class=\"token punctuation\">{</span> name: <span class=\"token string\">\"Darcy\"</span>, age: <span class=\"token number\">26</span> <span class=\"token punctuation\">}</span>,\n    <span class=\"token punctuation\">{</span> name: <span class=\"token string\">\"Ted\"</span>, age: <span class=\"token number\">22</span> <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span>,\n  <span class=\"token punctuation\">{</span> ordered: <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<h2 id=\"query-find\" style=\"position:relative;\"><a href=\"#query-find\" aria-label=\"query find permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Query (find)</h2>\n<p>user Collection의 모든 Document 선택</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token operator\">></span> db.user.find<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p><strong>pretty()</strong>: 결과를 읽기 좋은 형식으로 보여줌</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token operator\">></span> db.user.find<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>.pretty<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Collection에서 name 필드의 값이 ‘Jhon’인 Dcoument 선택</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token operator\">></span> db.user.find<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> name: <span class=\"token string\">\"Jhon\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3 id=\"비교-연산자\" style=\"position:relative;\"><a href=\"#%EB%B9%84%EA%B5%90-%EC%97%B0%EC%82%B0%EC%9E%90\" aria-label=\"비교 연산자 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://docs.mongodb.com/manual/reference/operator/query-comparison/#query-selectors-comparison\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">비교 연산자</a></h3>\n<ul>\n<li>$eq: 지정한 값과 같은</li>\n<li>$gt: 지정한 값보다 큰</li>\n<li>$gte: 지정한 값보다 크거나 같은</li>\n<li>$in: 지정한 배열 안에 속하는</li>\n<li>$lt: 지정한 값보다 작은</li>\n<li>$lte: 지정한 값보다 작거나 같은</li>\n<li>$ne: 지정한 값과 같지 않은</li>\n<li>$nin: 지정한 배열 안에 속하지 않는</li>\n</ul>\n<p>Collection에서 level 필드의 값이 3이상인 Document 선택</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">db.user.find<span class=\"token punctuation\">(</span>\n  <span class=\"token punctuation\">{</span>\n    level: <span class=\"token punctuation\">{</span> <span class=\"token variable\">$gte</span><span class=\"token builtin class-name\">:</span> <span class=\"token number\">3</span> <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>Collection에서 level 필드의 값이 2 또는 5 인 Document 선택</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token operator\">></span> db.user.find<span class=\"token punctuation\">(</span>\n  <span class=\"token punctuation\">{</span>\n    level: <span class=\"token punctuation\">{</span> <span class=\"token variable\">$in</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">[</span><span class=\"token number\">2</span>, <span class=\"token number\">5</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<h3 id=\"논리-연산자\" style=\"position:relative;\"><a href=\"#%EB%85%BC%EB%A6%AC-%EC%97%B0%EC%82%B0%EC%9E%90\" aria-label=\"논리 연산자 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>논리 연산자</h3>\n<ul>\n<li>$or</li>\n<li>$and</li>\n<li>$not : 지정 조건이 false면 true, true이면 false</li>\n<li>$nor : 모든 지정 조건이 false면 true</li>\n</ul>\n<p>Collection에서 status가 ‘A’이고 qty가 30 이상인 Document 선택</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token operator\">></span> db.inventory.find<span class=\"token punctuation\">(</span> \n  <span class=\"token punctuation\">{</span>\n    <span class=\"token variable\">$and</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token punctuation\">{</span> status: <span class=\"token string\">\"A\"</span> <span class=\"token punctuation\">}</span>,\n      <span class=\"token punctuation\">{</span> qty: <span class=\"token punctuation\">{</span> <span class=\"token variable\">$lt</span><span class=\"token builtin class-name\">:</span> <span class=\"token number\">30</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">)</span>\n\n<span class=\"token operator\">></span> db.inventory.find<span class=\"token punctuation\">(</span> \n  <span class=\"token punctuation\">{</span> \n    status: <span class=\"token string\">\"A\"</span>, \n    qty: <span class=\"token punctuation\">{</span> <span class=\"token variable\">$lt</span><span class=\"token builtin class-name\">:</span> <span class=\"token number\">30</span> <span class=\"token punctuation\">}</span> \n  <span class=\"token punctuation\">}</span> \n<span class=\"token punctuation\">)</span></code></pre></div>\n<blockquote>\n<p>위의 두 명령은 동일한 명령이라 할 수 있다.</p>\n</blockquote>\n<p>Collection에서 status가 ‘A’이거나 qty가 30 이상인 Document 선택</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">db.inventory.find<span class=\"token punctuation\">(</span> <span class=\"token punctuation\">{</span> <span class=\"token variable\">$or</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">[</span> <span class=\"token punctuation\">{</span> status: <span class=\"token string\">\"A\"</span> <span class=\"token punctuation\">}</span>, <span class=\"token punctuation\">{</span> qty: <span class=\"token punctuation\">{</span> <span class=\"token variable\">$lt</span><span class=\"token builtin class-name\">:</span> <span class=\"token number\">30</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">]</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">)</span></code></pre></div>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>a</mi><mi>n</mi><mi>d</mi><mi mathvariant=\"normal\">와</mi></mrow><annotation encoding=\"application/x-tex\">and와</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">d</span><span class=\"mord hangul_fallback\">와</span></span></span></span>or의 혼합 사용</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">db.inventory.find<span class=\"token punctuation\">(</span> <span class=\"token punctuation\">{</span>\n     status: <span class=\"token string\">\"A\"</span>,\n     <span class=\"token variable\">$or</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">[</span> <span class=\"token punctuation\">{</span> qty: <span class=\"token punctuation\">{</span> <span class=\"token variable\">$lt</span><span class=\"token builtin class-name\">:</span> <span class=\"token number\">30</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span>, <span class=\"token punctuation\">{</span> item: /^p/ <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span> <span class=\"token punctuation\">)</span></code></pre></div>\n<h3 id=\"match-an-embeddednested-document\" style=\"position:relative;\"><a href=\"#match-an-embeddednested-document\" aria-label=\"match an embeddednested document permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Match an Embedded/Nested Document</h3>\n<p><code class=\"language-text\">comments: { author: &quot;Jhon&quot;, comment: &quot;Good!&quot; }</code>를 완전히 일치 시킨 선택 명령</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">db.users.find<span class=\"token punctuation\">(</span>\n  <span class=\"token punctuation\">{</span> comments: <span class=\"token punctuation\">{</span> author: <span class=\"token string\">\"Jhon\"</span>, comment: <span class=\"token string\">\"Good!\"</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<blockquote>\n<p>comments: { comment: \"Good!\" , author: \"Jhon\", } 를 선택할 시 순서가 달라 정확히 일치하지 않기 때문에 결과가 나오지 않습니다.</p>\n</blockquote>\n<h3 id=\"query-on-nested-field\" style=\"position:relative;\"><a href=\"#query-on-nested-field\" aria-label=\"query on nested field permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Query on Nested Field</h3>\n<p><code class=\"language-text\">{ size: { w: 20, h: 40 } }</code>와 같은 형식의 Document들이 있을 때 size 필드 안의 h 가 15 이상인 도큐먼트 선택</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">db.inventory.find<span class=\"token punctuation\">(</span> <span class=\"token punctuation\">{</span> <span class=\"token string\">\"size.h\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token variable\">$lt</span><span class=\"token builtin class-name\">:</span> <span class=\"token number\">15</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">)</span></code></pre></div>\n<h3 id=\"query-an-array\" style=\"position:relative;\"><a href=\"#query-an-array\" aria-label=\"query an array permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Query an Array</h3>\n<h4 id=\"match-an-array\" style=\"position:relative;\"><a href=\"#match-an-array\" aria-label=\"match an array permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Match an Array</h4>\n<p>tags가 <code class=\"language-text\">[&quot;red&quot;, &quot;blank&quot;]</code>로 요소와 순서 모두가 정확히 일치하는 Document 선택</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">db.inventory.find<span class=\"token punctuation\">(</span> <span class=\"token punctuation\">{</span> tags: <span class=\"token punctuation\">[</span><span class=\"token string\">\"red\"</span>, <span class=\"token string\">\"blank\"</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">)</span></code></pre></div>\n<p>tag안에 red가 있는 document 선택</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">db.inventory.find<span class=\"token punctuation\">(</span> <span class=\"token punctuation\">{</span> tags: <span class=\"token string\">\"red\"</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">)</span></code></pre></div>\n<h4 id=\"all\" style=\"position:relative;\"><a href=\"#all\" aria-label=\"all permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>$all</h4>\n<p>tags가 ‘red’, ‘blank’ 두가지를 가지고 있는 Dcouments</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">db.inventory.find<span class=\"token punctuation\">(</span> <span class=\"token punctuation\">{</span> tags: <span class=\"token punctuation\">{</span> <span class=\"token variable\">$all</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"red\"</span>, <span class=\"token string\">\"blank\"</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">)</span></code></pre></div>\n<blockquote>\n<p>순서와 상관없고, 정확히 일치하는게 아닌 포함하고 있으면 된다.</p>\n</blockquote>\n<h4 id=\"elemmatch\" style=\"position:relative;\"><a href=\"#elemmatch\" aria-label=\"elemmatch permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>$elemMatch</h4>\n<p><code class=\"language-text\">dim_cm: [12, 16]</code>와 같은 형식이 있다.\n<code class=\"language-text\">dim_cm</code> 배열 안에 22초과, 30미만의 값을 포함하고 있는 Document를 선택</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">db.inventory.find<span class=\"token punctuation\">(</span> <span class=\"token punctuation\">{</span> dim_cm: <span class=\"token punctuation\">{</span> <span class=\"token variable\">$elemMatch</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token variable\">$gt</span><span class=\"token builtin class-name\">:</span> <span class=\"token number\">22</span>, <span class=\"token variable\">$lt</span><span class=\"token builtin class-name\">:</span> <span class=\"token number\">30</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">)</span></code></pre></div>\n<h4 id=\"query-for-an-element-by-the-array-index-position\" style=\"position:relative;\"><a href=\"#query-for-an-element-by-the-array-index-position\" aria-label=\"query for an element by the array index position permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Query for an Element by the Array Index Position</h4>\n<p><code class=\"language-text\">dim_cm</code> 배열의 1번째 index 요소가 25 초과인 Document 선택</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">db.inventory.find<span class=\"token punctuation\">(</span> <span class=\"token punctuation\">{</span> <span class=\"token string\">\"dim_cm.1\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token variable\">$gt</span><span class=\"token builtin class-name\">:</span> <span class=\"token number\">25</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">)</span></code></pre></div>\n<h4 id=\"query-an-array-by-array-length\" style=\"position:relative;\"><a href=\"#query-an-array-by-array-length\" aria-label=\"query an array by array length permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Query an Array by Array Length</h4>\n<p>tags 배열의 길이가 3인 Document 선택</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">db.inventory.find<span class=\"token punctuation\">(</span> <span class=\"token punctuation\">{</span> <span class=\"token string\">\"tags\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token variable\">$size</span><span class=\"token builtin class-name\">:</span> <span class=\"token number\">3</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">)</span></code></pre></div>\n<h3 id=\"query-for-null-or-missing-fields\" style=\"position:relative;\"><a href=\"#query-for-null-or-missing-fields\" aria-label=\"query for null or missing fields permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Query for Null or Missing Fields</h3>\n<p><code class=\"language-text\">{ _id: 1, item: null }, { _id: 2 }</code> 두개의 Document가 있다.\n아래는 item이 null인 document를 선택한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">db.inventory.find<span class=\"token punctuation\">(</span> <span class=\"token punctuation\">{</span> item: null <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">)</span></code></pre></div>\n<blockquote>\n<p>{ <em>id: 2 }도 item:null 이기 떄문에 두개의 Document가 모두 선택된다.</em>\n아래와 같이 하면 첫번째 document만 정상적으로 선택할 수 있다.</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">db.inventory.find<span class=\"token punctuation\">(</span> <span class=\"token punctuation\">{</span> item <span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token variable\">$type</span><span class=\"token builtin class-name\">:</span> <span class=\"token number\">10</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">)</span></code></pre></div>\n<blockquote>\n<p><a href=\"https://docs.mongodb.com/manual/reference/bson-types/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">BSON types</a>\nitem이 존재하지 않는 Document를 선택한다.</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">db.inventory.find<span class=\"token punctuation\">(</span> <span class=\"token punctuation\">{</span> item <span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token variable\">$exists</span><span class=\"token builtin class-name\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">)</span></code></pre></div>\n<h2 id=\"update\" style=\"position:relative;\"><a href=\"#update\" aria-label=\"update permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Update</h2>\n<h3 id=\"dbcollectionupdateonefilter-update-options\" style=\"position:relative;\"><a href=\"#dbcollectionupdateonefilter-update-options\" aria-label=\"dbcollectionupdateonefilter update options permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://docs.mongodb.com/manual/reference/method/db.collection.updateOne/#db.collection.updateOne\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">db.collection.updateOne(filter, update, options)</a></h3>\n<p><code class=\"language-text\">{ name: &quot;Jhon&quot;, age: 29 }</code>에서 age를 25로 변경</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">db.user.updateOne<span class=\"token punctuation\">(</span>\n  <span class=\"token punctuation\">{</span> name: <span class=\"token string\">\"Jhon\"</span> <span class=\"token punctuation\">}</span>,\n  <span class=\"token punctuation\">{</span> <span class=\"token variable\">$set</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">{</span> age: <span class=\"token number\">25</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>options의 upsert 속성을 사용하면 만약 Kay가 존재하지 않을 시 Document를 새로 만들며 업데이트 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token operator\">></span> db.user.updateOne<span class=\"token punctuation\">(</span>\n  <span class=\"token punctuation\">{</span>name:<span class=\"token string\">\"Kay\"</span><span class=\"token punctuation\">}</span>,\n  <span class=\"token punctuation\">{</span> <span class=\"token variable\">$set</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">{</span> age: <span class=\"token number\">25</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span>,\n  <span class=\"token punctuation\">{</span>upsert: true<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>배열 field에 값 추가하기 (<code class=\"language-text\">skills: []</code>)</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token operator\">></span> db.user.updateOne<span class=\"token punctuation\">(</span>\n  <span class=\"token punctuation\">{</span>name:<span class=\"token string\">\"Jhon\"</span><span class=\"token punctuation\">}</span>,\n  <span class=\"token punctuation\">{</span><span class=\"token variable\">$push</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">{</span>skills: <span class=\"token string\">'react'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>배열 field에 값 추가하기 + 정렬</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># 여러개 추가 시 $each 사용</span>\n<span class=\"token comment\"># 알파벳순으로 정렬시 $sort 사용</span>\n\n<span class=\"token operator\">></span> db.user.updateOne<span class=\"token punctuation\">(</span>\n  <span class=\"token punctuation\">{</span>name:<span class=\"token string\">\"Jhon\"</span><span class=\"token punctuation\">}</span>,\n  <span class=\"token punctuation\">{</span><span class=\"token variable\">$push</span><span class=\"token builtin class-name\">:</span> \n    skills: <span class=\"token punctuation\">{</span>\n      <span class=\"token variable\">$each</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'vue'</span>, <span class=\"token string\">'angular'</span><span class=\"token punctuation\">]</span>,\n      <span class=\"token variable\">$sort</span><span class=\"token builtin class-name\">:</span> <span class=\"token number\">1</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>배열 field에 값 제거하기</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token operator\">></span> db.user.updateOne<span class=\"token punctuation\">(</span>\n  <span class=\"token punctuation\">{</span>name:<span class=\"token string\">\"Jhon\"</span><span class=\"token punctuation\">}</span>,\n  <span class=\"token punctuation\">{</span><span class=\"token variable\">$pull</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">{</span>skills: <span class=\"token string\">'react'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>배열 field에서 여러값 제거하기</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token operator\">></span> db.user.updateOne<span class=\"token punctuation\">(</span>\n  <span class=\"token punctuation\">{</span>name:<span class=\"token string\">\"Jhon\"</span><span class=\"token punctuation\">}</span>,\n  <span class=\"token punctuation\">{</span><span class=\"token variable\">$pull</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">{</span>skills: <span class=\"token variable\">$in</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'angular'</span>, <span class=\"token string\">'vue'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<h3 id=\"dbcollectionupdatemanyfilter-update-options\" style=\"position:relative;\"><a href=\"#dbcollectionupdatemanyfilter-update-options\" aria-label=\"dbcollectionupdatemanyfilter update options permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://docs.mongodb.com/manual/reference/method/db.collection.updateMany/#db.collection.updateMany\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">db.collection.updateMany(filter, update, options)</a></h3>\n<p>level이 3이상인 document의 admin을 true로 변경</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">db.user.updateMany<span class=\"token punctuation\">(</span>\n  <span class=\"token punctuation\">{</span> level: <span class=\"token punctuation\">{</span><span class=\"token variable\">$gte</span><span class=\"token builtin class-name\">:</span> <span class=\"token number\">3</span><span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span>,\n  <span class=\"token punctuation\">{</span> <span class=\"token variable\">$set</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">{</span>admin: true<span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<h3 id=\"dbcollectionreplaceonefilter-replacement-options\" style=\"position:relative;\"><a href=\"#dbcollectionreplaceonefilter-replacement-options\" aria-label=\"dbcollectionreplaceonefilter replacement options permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://docs.mongodb.com/manual/reference/method/db.collection.replaceOne/#db.collection.replaceOne\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">db.collection.replaceOne(filter, replacement, options)</a></h3>\n<p>name:”Kay”인 Document를 <code class=\"language-text\">{name:&quot;Kai&quot;, age: 21}</code>로 교체한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token operator\">></span> db.user.replaceOne<span class=\"token punctuation\">(</span>\n  <span class=\"token punctuation\">{</span>name:<span class=\"token string\">\"Kay\"</span><span class=\"token punctuation\">}</span>,\n  <span class=\"token punctuation\">{</span>name:<span class=\"token string\">\"Kai\"</span>, age: <span class=\"token number\">21</span><span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<blockquote>\n<p>교체, 업데이트 후에도 도큐먼트의 ID는 유지된다.</p>\n</blockquote>\n<h3 id=\"dbcollectionupdatequery-update-options\" style=\"position:relative;\"><a href=\"#dbcollectionupdatequery-update-options\" aria-label=\"dbcollectionupdatequery update options permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://docs.mongodb.com/manual/reference/method/db.collection.update/#db.collection.update\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">db.collection.update(query, update, options)</a></h3>\n<p>documnet를 replace 하기</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># 이름이 Jhon인 도큐먼트를 name Jun, age 21으로 교체</span>\n\n<span class=\"token operator\">></span> db.user.update<span class=\"token punctuation\">(</span>\n  <span class=\"token punctuation\">{</span>name:<span class=\"token string\">\"Jhon\"</span><span class=\"token punctuation\">}</span>, <span class=\"token punctuation\">{</span>name: <span class=\"token string\">\"Jun\"</span>, age: <span class=\"token number\">21</span><span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>여러 Document Update, options의 multi 속성이 필요하다, 또는 insertMany를 사용하는 방법도 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token operator\">></span> db.user.update<span class=\"token punctuation\">(</span>\n  <span class=\"token punctuation\">{</span>level: <span class=\"token punctuation\">{</span><span class=\"token variable\">$lte</span>:3<span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>,\n  <span class=\"token punctuation\">{</span><span class=\"token variable\">$set</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">{</span>admin: false<span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>,\n  <span class=\"token punctuation\">{</span>multi: true<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<h2 id=\"delete\" style=\"position:relative;\"><a href=\"#delete\" aria-label=\"delete permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Delete</h2>\n<p>inventory Collection안의 모든 Document가 삭제된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">db.inventory.deleteMany<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Collection안의 status가 A인 Dcoument가 모두 삭제된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">db.inventory.deleteMany<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> status <span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"A\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Collection안의 status가 D인 Dcoument가 하나 삭제된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">db.inventory.deleteOne<span class=\"token punctuation\">(</span> <span class=\"token punctuation\">{</span> status: <span class=\"token string\">\"D\"</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">)</span></code></pre></div>\n<hr>\n<p>References</p>\n<ul>\n<li><a href=\"https://docs.mongodb.com/manual/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">MongoDB | Documentation</a></li>\n</ul>","excerpt":"MongoDB 문서를 참고해,\nCheatSheet 개념으로 정리해본 기초 Mongo Shell CRUD 명령어. 이 포스트에서는 기초적인 것만 다루며  Option, Evaluation Query 등은 다루지 않습니다. Database Databas…","tableOfContents":"<ul>\n<li>\n<p><a href=\"/mongodb-basic-crud/#database\">Database</a></p>\n<ul>\n<li><a href=\"/mongodb-basic-crud/#database-%EB%AA%A9%EB%A1%9D\">Database 목록</a></li>\n<li><a href=\"/mongodb-basic-crud/#database-%EC%84%A0%ED%83%9D\">Database 선택</a></li>\n<li><a href=\"/mongodb-basic-crud/#database-%EC%A0%9C%EA%B1%B0\">Database 제거</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"/mongodb-basic-crud/#collection\">Collection</a></p>\n<ul>\n<li><a href=\"/mongodb-basic-crud/#collection-%EC%83%9D%EC%84%B1\">Collection 생성</a></li>\n<li><a href=\"/mongodb-basic-crud/#collection-%EC%A0%9C%EA%B1%B0\">Collection 제거</a></li>\n<li><a href=\"/mongodb-basic-crud/#collection-%EC%9D%B4%EB%A6%84-%EB%B3%80%EA%B2%BD\">Collection 이름 변경</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"/mongodb-basic-crud/#insert\">Insert</a></p>\n<ul>\n<li><a href=\"/mongodb-basic-crud/#%ED%95%98%EB%82%98%EC%9D%98-document-%EC%82%BD%EC%9E%85\">하나의 Document 삽입</a></li>\n<li><a href=\"/mongodb-basic-crud/#%EC%97%AC%EB%9F%AC-document-%EC%82%BD%EC%9E%85\">여러 Document 삽입</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"/mongodb-basic-crud/#query-find\">Query (find)</a></p>\n<ul>\n<li><a href=\"/mongodb-basic-crud/#%EB%B9%84%EA%B5%90-%EC%97%B0%EC%82%B0%EC%9E%90\">비교 연산자</a></li>\n<li><a href=\"/mongodb-basic-crud/#%EB%85%BC%EB%A6%AC-%EC%97%B0%EC%82%B0%EC%9E%90\">논리 연산자</a></li>\n<li><a href=\"/mongodb-basic-crud/#match-an-embeddednested-document\">Match an Embedded/Nested Document</a></li>\n<li><a href=\"/mongodb-basic-crud/#query-on-nested-field\">Query on Nested Field</a></li>\n<li><a href=\"/mongodb-basic-crud/#query-an-array\">Query an Array</a></li>\n<li><a href=\"/mongodb-basic-crud/#query-for-null-or-missing-fields\">Query for Null or Missing Fields</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"/mongodb-basic-crud/#update\">Update</a></p>\n<ul>\n<li><a href=\"/mongodb-basic-crud/#dbcollectionupdateonefilter-update-options\">db.collection.updateOne(filter, update, options)</a></li>\n<li><a href=\"/mongodb-basic-crud/#dbcollectionupdatemanyfilter-update-options\">db.collection.updateMany(filter, update, options)</a></li>\n<li><a href=\"/mongodb-basic-crud/#dbcollectionreplaceonefilter-replacement-options\">db.collection.replaceOne(filter, replacement, options)</a></li>\n<li><a href=\"/mongodb-basic-crud/#dbcollectionupdatequery-update-options\">db.collection.update(query, update, options)</a></li>\n</ul>\n</li>\n<li><a href=\"/mongodb-basic-crud/#delete\">Delete</a></li>\n</ul>","fields":{"slug":"/mongodb-basic-crud/"},"frontmatter":{"title":"MongoDB 기초, CRUD 명령어","date":"Jul 30, 2019","tags":["mongodb"],"keywords":["몽고디비 명령어","몽고 명령어","mongodb 명령어","mongodb 사용법","mongodb insert","mongodb update","mongodb delete","mongodb query","몽고디비 사용법","mongodb crud"],"update":"Jan 01, 0001"}}},"pageContext":{"slug":"/mongodb-basic-crud/","series":[],"lastmod":"2019-07-30"}},"staticQueryHashes":["2027115977","694178885"]}